<form class="example-form" [formGroup]="searchForm">
  <mat-form-field class="example-full-width">
    <span matPrefix> </span>
    <input
      matInput
      class="form-control"
      type="text"
      placeholder="Search..."
      formControlName="search"
      id="itemSearch"
      name="itemSearch"
    />
  </mat-form-field>
  <mat-form-field>
    <mat-label>User role</mat-label>
    <mat-select formControlName="filter">
      <mat-option *ngFor="let role of roles" [value]="role.value">
        {{ role.viewValue }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <button
    color="accent"
    type="submit"
    class="submit-button"
    (click)="search()"
    id="submit-button"
    matSuffix
    mat-button
  >
    <mat-icon>search</mat-icon>
  </button>
</form>
<mat-card>
  <table
    mat-table
    [dataSource]="dataSource"
    matSort
    (matSortChange)="announceSortChange($event)"
    class="mat-elevation-z8"
  >
    <!-- Username Column -->
    <ng-container matColumnDef="Username">
      <th
        mat-header-cell
        *matHeaderCellDef
        mat-sort-header="username"
        sortActionDescription="Sort by username"
      >
        Username
      </th>
      <td mat-cell *matCellDef="let element">{{ element.username }}</td>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="Name">
      <th
        mat-header-cell
        *matHeaderCellDef
        mat-sort-header="name"
        sortActionDescription="Sort by name"
      >
        Name
      </th>
      <td mat-cell *matCellDef="let element">{{ element.name }}</td>
    </ng-container>

    <!-- Surname Column -->
    <ng-container matColumnDef="Surname">
      <th
        mat-header-cell
        *matHeaderCellDef
        mat-sort-header="surname"
        sortActionDescription="Sort by surname"
      >
        Surname
      </th>
      <td mat-cell *matCellDef="let element">{{ element.surname }}</td>
    </ng-container>

    <!-- Paycheck Column -->
    <ng-container matColumnDef="Paycheck">
      <th
        mat-header-cell
        *matHeaderCellDef
        mat-sort-header="paycheck"
        sortActionDescription="Sort by paycheck"
      >
        Paycheck
      </th>
      <td mat-cell *matCellDef="let element">{{ element.paycheck }}</td>
    </ng-container>

    <!-- Role Column -->
    <ng-container matColumnDef="Role">
      <th
        mat-header-cell
        *matHeaderCellDef
        mat-sort-header="role"
        sortActionDescription="Sort by role"
      >
        Role
      </th>
      <td mat-cell *matCellDef="let element">
        {{ element.role | replaceUnderscore | titlecase }}
      </td>
    </ng-container>

    <!-- Edit Column -->
    <ng-container matColumnDef="Edit paycheck">
      <td></td>
      <th mat-header-cell *matHeaderCellDef>Edit paycheck</th>
      <td mat-cell *matCellDef="let element; let i = index">
        <button
          *ngIf="enableEdit && enableEditIndex == i"
          (click)="enableEdit = false"
          class="btn page-secondary-action-btn"
          ng-click="cancel()"
        >
          Cancel
        </button>
        <button
          *ngIf="enableEdit && enableEditIndex == i"
          id="saveBtn"
          class="btn page-primary-action-btn"
          (click)="editPrice(element.username)"
          type="submit"
        >
          Save
        </button>
        <a
          href="#"
          class="table-row-action edit-action"
          *ngIf="!enableEdit"
          (click)="enableEditMethod($event, i)"
        >
          edit</a
        >
      </td>
      <!--<td mat-cell *matCellDef="let element">
        <button
          mat-button
          color="accent"
          type="submit"
          class="submit-button"
          (click)="editPrice(element.username)"
        >
          Edit
        </button></td>-->
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
  </table>
</mat-card>
